#!/bin/bash
#
# Pre-commit hook to auto-generate tool documentation
# Install: ln -s ../../scripts/pre-commit-docs .git/hooks/pre-commit
#

set -e

echo "ğŸ” Checking for @mcp_tool changes..."

# Check if any handler files changed
if git diff --cached --name-only | grep -q 'src/mcp_handlers/.*\.py'; then
    echo "ğŸ“ Handler files changed, regenerating documentation..."

    python3 scripts/generate_tool_docs.py

    # Add generated docs to commit
    git add tools/README.md

    echo "âœ… Documentation updated and staged"
else
    echo "âœ… No handler changes detected"
fi

exit 0
